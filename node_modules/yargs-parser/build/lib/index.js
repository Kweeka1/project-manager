/**
 * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
 * CJS and ESM environments.
 *
 * @license
 * Copyright (c) 2016, Contributors
 * SPDX-License-Identifier: ISC
 */
import ***REMOVED*** format ***REMOVED*** from 'util';
import ***REMOVED*** normalize, resolve ***REMOVED*** from 'path';
import ***REMOVED*** camelCase, decamelize, looksLikeNumber ***REMOVED*** from './string-utils.js';
import ***REMOVED*** YargsParser ***REMOVED*** from './yargs-parser.js';
import ***REMOVED*** readFileSync ***REMOVED*** from 'fs';
// See https://github.com/yargs/yargs-parser#supported-nodejs-versions for our
// version support policy. The YARGS_MIN_NODE_VERSION is used for testing only.
const minNodeVersion = (process && process.env && process.env.YARGS_MIN_NODE_VERSION)
    ? Number(process.env.YARGS_MIN_NODE_VERSION)
    : 12;
if (process && process.version) ***REMOVED***
    const major = Number(process.version.match(/v([^.]+)/)[1]);
    if (major < minNodeVersion) ***REMOVED***
        throw Error(`yargs parser supports a minimum Node.js version of $***REMOVED***minNodeVersion***REMOVED***. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);
***REMOVED***
***REMOVED***
// Creates a yargs-parser instance using Node.js standard libraries:
const env = process ? process.env : ***REMOVED******REMOVED***;
const parser = new YargsParser(***REMOVED***
    cwd: process.cwd,
    env: () => ***REMOVED***
        return env;
***REMOVED***,
    format,
    normalize,
    resolve,
    // TODO: figure  out a  way to combine ESM and CJS coverage, such  that
    // we can exercise all the lines below:
    require: (path) => ***REMOVED***
        if (typeof require !== 'undefined') ***REMOVED***
            return require(path);
    ***REMOVED***
        else if (path.match(/\.json$/)) ***REMOVED***
            // Addresses: https://github.com/yargs/yargs/issues/2040
            return JSON.parse(readFileSync(path, 'utf8'));
    ***REMOVED***
        else ***REMOVED***
            throw Error('only .json config files are supported in ESM');
    ***REMOVED***
***REMOVED***
***REMOVED***);
const yargsParser = function Parser(args, opts) ***REMOVED***
    const result = parser.parse(args.slice(), opts);
    return result.argv;
***REMOVED***;
yargsParser.detailed = function (args, opts) ***REMOVED***
    return parser.parse(args.slice(), opts);
***REMOVED***;
yargsParser.camelCase = camelCase;
yargsParser.decamelize = decamelize;
yargsParser.looksLikeNumber = looksLikeNumber;
export default yargsParser;

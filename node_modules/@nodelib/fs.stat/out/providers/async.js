"use strict";
Object.defineProperty(exports, "__esModule", ***REMOVED*** value: true ***REMOVED***);
exports.read = void 0;
function read(path, settings, callback) ***REMOVED***
    settings.fs.lstat(path, (lstatError, lstat) => ***REMOVED***
        if (lstatError !== null) ***REMOVED***
            callFailureCallback(callback, lstatError);
            return;
    ***REMOVED***
        if (!lstat.isSymbolicLink() || !settings.followSymbolicLink) ***REMOVED***
            callSuccessCallback(callback, lstat);
            return;
    ***REMOVED***
        settings.fs.stat(path, (statError, stat) => ***REMOVED***
            if (statError !== null) ***REMOVED***
                if (settings.throwErrorOnBrokenSymbolicLink) ***REMOVED***
                    callFailureCallback(callback, statError);
                    return;
            ***REMOVED***
                callSuccessCallback(callback, lstat);
                return;
        ***REMOVED***
            if (settings.markSymbolicLink) ***REMOVED***
                stat.isSymbolicLink = () => true;
        ***REMOVED***
            callSuccessCallback(callback, stat);
    ***REMOVED***);
***REMOVED***);
***REMOVED***
exports.read = read;
function callFailureCallback(callback, error) ***REMOVED***
    callback(error);
***REMOVED***
function callSuccessCallback(callback, result) ***REMOVED***
    callback(null, result);
***REMOVED***

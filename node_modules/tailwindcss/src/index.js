import setupTrackingContext from './lib/setupTrackingContext'
import processTailwindFeatures from './processTailwindFeatures'
import ***REMOVED*** env ***REMOVED*** from './lib/sharedState'

module.exports = function tailwindcss(configOrPath) ***REMOVED***
  return ***REMOVED***
    postcssPlugin: 'tailwindcss',
    plugins: [
      env.DEBUG &&
        function (root) ***REMOVED***
          console.log('\n')
          console.time('JIT TOTAL')
          return root
    ***REMOVED***,
      function (root, result) ***REMOVED***
        let context = setupTrackingContext(configOrPath)

        /*
        if (root.type === 'document') ***REMOVED***
          let roots = root.nodes.filter((node) => node.type === 'root')

          for (const root of roots) ***REMOVED***
            if (root.type === 'root') ***REMOVED***
              processTailwindFeatures(context)(root, result)
        ***REMOVED***
      ***REMOVED***

          return
    ***REMOVED***
        */

        processTailwindFeatures(context)(root, result)
  ***REMOVED***,
      env.DEBUG &&
        function (root) ***REMOVED***
          console.timeEnd('JIT TOTAL')
          console.log('\n')
          return root
    ***REMOVED***,
    ].filter(Boolean),
***REMOVED***
***REMOVED***

module.exports.postcss = true

'use strict';

var isWindows = process.platform === 'win32';

// Regex to split a windows path into into [dir, root, basename, name, ext]
var splitWindowsRe =
    /^(((?:[a-zA-Z]:|[\\\/]***REMOVED***2***REMOVED***[^\\\/]+[\\\/]+[^\\\/]+)?[\\\/]?)(?:[^\\\/]*[\\\/])*)((\.***REMOVED***1,2***REMOVED***|[^\\\/]+?|)(\.[^.\/\\]*|))[\\\/]*$/;

var win32 = ***REMOVED******REMOVED***;

function win32SplitPath(filename) ***REMOVED***
  return splitWindowsRe.exec(filename).slice(1);
***REMOVED***

win32.parse = function(pathString) ***REMOVED***
  if (typeof pathString !== 'string') ***REMOVED***
    throw new TypeError(
        "Parameter 'pathString' must be a string, not " + typeof pathString
    );
***REMOVED***
  var allParts = win32SplitPath(pathString);
  if (!allParts || allParts.length !== 5) ***REMOVED***
    throw new TypeError("Invalid path '" + pathString + "'");
***REMOVED***
  return ***REMOVED***
    root: allParts[1],
    dir: allParts[0] === allParts[1] ? allParts[0] : allParts[0].slice(0, -1),
    base: allParts[2],
    ext: allParts[4],
    name: allParts[3]
***REMOVED***;
***REMOVED***;



// Split a filename into [dir, root, basename, name, ext], unix version
// 'root' is just a slash, or nothing.
var splitPathRe =
    /^((\/?)(?:[^\/]*\/)*)((\.***REMOVED***1,2***REMOVED***|[^\/]+?|)(\.[^.\/]*|))[\/]*$/;
var posix = ***REMOVED******REMOVED***;


function posixSplitPath(filename) ***REMOVED***
  return splitPathRe.exec(filename).slice(1);
***REMOVED***


posix.parse = function(pathString) ***REMOVED***
  if (typeof pathString !== 'string') ***REMOVED***
    throw new TypeError(
        "Parameter 'pathString' must be a string, not " + typeof pathString
    );
***REMOVED***
  var allParts = posixSplitPath(pathString);
  if (!allParts || allParts.length !== 5) ***REMOVED***
    throw new TypeError("Invalid path '" + pathString + "'");
***REMOVED***
  
  return ***REMOVED***
    root: allParts[1],
    dir: allParts[0].slice(0, -1),
    base: allParts[2],
    ext: allParts[4],
    name: allParts[3],
***REMOVED***;
***REMOVED***;


if (isWindows)
  module.exports = win32.parse;
else /* posix */
  module.exports = posix.parse;

module.exports.posix = posix.parse;
module.exports.win32 = win32.parse;

'use strict'

const fs = require('graceful-fs')

function symlinkType (srcpath, type, callback) ***REMOVED***
  callback = (typeof type === 'function') ? type : callback
  type = (typeof type === 'function') ? false : type
  if (type) return callback(null, type)
  fs.lstat(srcpath, (err, stats) => ***REMOVED***
    if (err) return callback(null, 'file')
    type = (stats && stats.isDirectory()) ? 'dir' : 'file'
    callback(null, type)
***REMOVED***)
***REMOVED***

function symlinkTypeSync (srcpath, type) ***REMOVED***
  let stats

  if (type) return type
  try ***REMOVED***
    stats = fs.lstatSync(srcpath)
***REMOVED*** catch ***REMOVED***
    return 'file'
***REMOVED***
  return (stats && stats.isDirectory()) ? 'dir' : 'file'
***REMOVED***

module.exports = ***REMOVED***
  symlinkType,
  symlinkTypeSync
***REMOVED***

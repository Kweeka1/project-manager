'use strict'

const u = require('universalify').fromPromise
const fs = require('../fs')
const path = require('path')
const mkdir = require('../mkdirs')
const remove = require('../remove')

const emptyDir = u(async function emptyDir (dir) ***REMOVED***
  let items
  try ***REMOVED***
    items = await fs.readdir(dir)
***REMOVED*** catch ***REMOVED***
    return mkdir.mkdirs(dir)
***REMOVED***

  return Promise.all(items.map(item => remove.remove(path.join(dir, item))))
***REMOVED***)

function emptyDirSync (dir) ***REMOVED***
  let items
  try ***REMOVED***
    items = fs.readdirSync(dir)
***REMOVED*** catch ***REMOVED***
    return mkdir.mkdirsSync(dir)
***REMOVED***

  items.forEach(item => ***REMOVED***
    item = path.join(dir, item)
    remove.removeSync(item)
***REMOVED***)
***REMOVED***

module.exports = ***REMOVED***
  emptyDirSync,
  emptydirSync: emptyDirSync,
  emptyDir,
  emptydir: emptyDir
***REMOVED***

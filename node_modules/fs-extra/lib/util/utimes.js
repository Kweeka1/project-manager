'use strict'

const fs = require('graceful-fs')

function utimesMillis (path, atime, mtime, callback) ***REMOVED***
  // if (!HAS_MILLIS_RES) return fs.utimes(path, atime, mtime, callback)
  fs.open(path, 'r+', (err, fd) => ***REMOVED***
    if (err) return callback(err)
    fs.futimes(fd, atime, mtime, futimesErr => ***REMOVED***
      fs.close(fd, closeErr => ***REMOVED***
        if (callback) callback(futimesErr || closeErr)
  ***REMOVED***)
***REMOVED***)
***REMOVED***)
***REMOVED***

function utimesMillisSync (path, atime, mtime) ***REMOVED***
  const fd = fs.openSync(path, 'r+')
  fs.futimesSync(fd, atime, mtime)
  return fs.closeSync(fd)
***REMOVED***

module.exports = ***REMOVED***
  utimesMillis,
  utimesMillisSync
***REMOVED***

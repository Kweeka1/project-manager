import path from 'path'
import ***REMOVED*** DepGraph ***REMOVED*** from 'dependency-graph'

export default function createDependencyGraph() ***REMOVED***
  const graph = new DepGraph()
  return ***REMOVED***
    add(message) ***REMOVED***
      message.parent = path.resolve(message.parent)
      graph.addNode(message.parent)

      if (message.type === 'dir-dependency') ***REMOVED***
        message.dir = path.resolve(message.dir)
        graph.addNode(message.dir)
        graph.addDependency(message.parent, message.dir)
  ***REMOVED*** else ***REMOVED***
        message.file = path.resolve(message.file)
        graph.addNode(message.file)
        graph.addDependency(message.parent, message.file)
  ***REMOVED***

      return message
***REMOVED***,
    dependantsOf(node) ***REMOVED***
      node = path.resolve(node)

      if (graph.hasNode(node)) return graph.dependantsOf(node)
      return []
***REMOVED***,
***REMOVED***
***REMOVED***

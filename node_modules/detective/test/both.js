var test = require('tap').test;
var detective = require('../');
var fs = require('fs');
var src = fs.readFileSync(__dirname + '/files/both.js');

test('both', function (t) ***REMOVED***
    var modules = detective.find(src);
    t.deepEqual(modules.strings, [ 'a', 'b' ]);
    t.deepEqual(modules.expressions, [ "'c' + x", "'d' + y" ]);
    t.notOk(modules.nodes, 'has no nodes');
    t.end();
***REMOVED***);

test('both with nodes specified in opts', function (t) ***REMOVED***
    var modules = detective.find(src, ***REMOVED*** nodes: true ***REMOVED***);
    t.deepEqual(modules.strings, [ 'a', 'b' ]);
    t.deepEqual(modules.expressions, [ "'c' + x", "'d' + y" ]);
    t.deepEqual(
      modules.nodes.map(function (n) ***REMOVED*** 
        var arg = n.arguments[0];
        return arg.value || arg.left.value; 
  ***REMOVED***),
      [ 'a', 'b', 'c', 'd' ],
      'has a node for each require');
    t.end();
***REMOVED***);

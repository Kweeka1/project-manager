// Minimal replacement for ansi string helpers "wrap-ansi" and "strip-ansi".
// to facilitate ESM and Deno modules.
// TODO: look at porting https://www.npmjs.com/package/wrap-ansi to ESM.
// The npm application
// Copyright (c) npm, Inc. and Contributors
// Licensed on the terms of The Artistic License 2.0
// See: https://github.com/npm/cli/blob/4c65cd952bc8627811735bea76b9b110cc4fc80e/lib/utils/ansi-trim.js
const ansi = new RegExp('\x1b(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|' +
    '\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)', 'g');
export function stripAnsi(str) ***REMOVED***
    return str.replace(ansi, '');
***REMOVED***
export function wrap(str, width) ***REMOVED***
    const [start, end] = str.match(ansi) || ['', ''];
    str = stripAnsi(str);
    let wrapped = '';
    for (let i = 0; i < str.length; i++) ***REMOVED***
        if (i !== 0 && (i % width) === 0) ***REMOVED***
            wrapped += '\n';
    ***REMOVED***
        wrapped += str.charAt(i);
***REMOVED***
    if (start && end) ***REMOVED***
        wrapped = `$***REMOVED***start***REMOVED***$***REMOVED***wrapped***REMOVED***$***REMOVED***end***REMOVED***`;
***REMOVED***
    return wrapped;
***REMOVED***

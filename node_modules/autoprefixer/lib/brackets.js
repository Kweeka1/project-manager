function last(array) ***REMOVED***
  return array[array.length - 1]
***REMOVED***

let brackets = ***REMOVED***
  /**
   * Parse string to nodes tree
   */
  parse(str) ***REMOVED***
    let current = ['']
    let stack = [current]

    for (let sym of str) ***REMOVED***
      if (sym === '(') ***REMOVED***
        current = ['']
        last(stack).push(current)
        stack.push(current)
        continue
  ***REMOVED***

      if (sym === ')') ***REMOVED***
        stack.pop()
        current = last(stack)
        current.push('')
        continue
  ***REMOVED***

      current[current.length - 1] += sym
***REMOVED***

    return stack[0]
***REMOVED***

  /**
   * Generate output string by nodes tree
   */
  stringify(ast) ***REMOVED***
    let result = ''
    for (let i of ast) ***REMOVED***
      if (typeof i === 'object') ***REMOVED***
        result += `($***REMOVED***brackets.stringify(i)***REMOVED***)`
        continue
  ***REMOVED***

      result += i
***REMOVED***
    return result
***REMOVED***
***REMOVED***

module.exports = brackets

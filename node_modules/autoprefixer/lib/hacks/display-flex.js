let flexSpec = require('./flex-spec')
let OldValue = require('../old-value')
let Value = require('../value')

class DisplayFlex extends Value ***REMOVED***
  constructor(name, prefixes) ***REMOVED***
    super(name, prefixes)
    if (name === 'display-flex') ***REMOVED***
      this.name = 'flex'
***REMOVED***
***REMOVED***

  /**
   * Faster check for flex value
   */
  check(decl) ***REMOVED***
    return decl.prop === 'display' && decl.value === this.name
***REMOVED***

  /**
   * Return value by spec
   */
  prefixed(prefix) ***REMOVED***
    let spec, value
    ;[spec, prefix] = flexSpec(prefix)

    if (spec === 2009) ***REMOVED***
      if (this.name === 'flex') ***REMOVED***
        value = 'box'
  ***REMOVED*** else ***REMOVED***
        value = 'inline-box'
  ***REMOVED***
***REMOVED*** else if (spec === 2012) ***REMOVED***
      if (this.name === 'flex') ***REMOVED***
        value = 'flexbox'
  ***REMOVED*** else ***REMOVED***
        value = 'inline-flexbox'
  ***REMOVED***
***REMOVED*** else if (spec === 'final') ***REMOVED***
      value = this.name
***REMOVED***

    return prefix + value
***REMOVED***

  /**
   * Add prefix to value depend on flebox spec version
   */
  replace(string, prefix) ***REMOVED***
    return this.prefixed(prefix)
***REMOVED***

  /**
   * Change value for old specs
   */
  old(prefix) ***REMOVED***
    let prefixed = this.prefixed(prefix)
    if (!prefixed) return undefined
    return new OldValue(this.name, prefixed)
***REMOVED***
***REMOVED***

DisplayFlex.names = ['display-flex', 'inline-flex']

module.exports = DisplayFlex

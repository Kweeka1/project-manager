let flexSpec = require('./flex-spec')
let Declaration = require('../declaration')

class AlignSelf extends Declaration ***REMOVED***
  check(decl) ***REMOVED***
    return (
      decl.parent &&
      !decl.parent.some(i => ***REMOVED***
        return i.prop && i.prop.startsWith('grid-')
  ***REMOVED***)
    )
***REMOVED***

  /**
   * Change property name for 2012 specs
   */
  prefixed(prop, prefix) ***REMOVED***
    let spec
    ;[spec, prefix] = flexSpec(prefix)
    if (spec === 2012) ***REMOVED***
      return prefix + 'flex-item-align'
***REMOVED***
    return super.prefixed(prop, prefix)
***REMOVED***

  /**
   * Return property name by final spec
   */
  normalize() ***REMOVED***
    return 'align-self'
***REMOVED***

  /**
   * Change value for 2012 spec and ignore prefix for 2009
   */
  set(decl, prefix) ***REMOVED***
    let spec = flexSpec(prefix)[0]
    if (spec === 2012) ***REMOVED***
      decl.value = AlignSelf.oldValues[decl.value] || decl.value
      return super.set(decl, prefix)
***REMOVED***
    if (spec === 'final') ***REMOVED***
      return super.set(decl, prefix)
***REMOVED***
    return undefined
***REMOVED***
***REMOVED***

AlignSelf.names = ['align-self', 'flex-item-align']

AlignSelf.oldValues = ***REMOVED***
  'flex-end': 'end',
  'flex-start': 'start'
***REMOVED***

module.exports = AlignSelf

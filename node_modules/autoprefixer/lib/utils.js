let ***REMOVED*** list ***REMOVED*** = require('postcss')

/**
 * Throw special error, to tell beniary,
 * that this error is from Autoprefixer.
 */
module.exports.error = function (text) ***REMOVED***
  let err = new Error(text)
  err.autoprefixer = true
  throw err
***REMOVED***

/**
 * Return array, that doesnâ€™t contain duplicates.
 */
module.exports.uniq = function (array) ***REMOVED***
  return [...new Set(array)]
***REMOVED***

/**
 * Return "-webkit-" on "-webkit- old"
 */
module.exports.removeNote = function (string) ***REMOVED***
  if (!string.includes(' ')) ***REMOVED***
    return string
***REMOVED***

  return string.split(' ')[0]
***REMOVED***

/**
 * Escape RegExp symbols
 */
module.exports.escapeRegexp = function (string) ***REMOVED***
  return string.replace(/[$()*+-.?[\\\]^***REMOVED***|***REMOVED***]/g, '\\$&')
***REMOVED***

/**
 * Return regexp to check, that CSS string contain word
 */
module.exports.regexp = function (word, escape = true) ***REMOVED***
  if (escape) ***REMOVED***
    word = this.escapeRegexp(word)
***REMOVED***
  return new RegExp(`(^|[\\s,(])($***REMOVED***word***REMOVED***($|[\\s(,]))`, 'gi')
***REMOVED***

/**
 * Change comma list
 */
module.exports.editList = function (value, callback) ***REMOVED***
  let origin = list.comma(value)
  let changed = callback(origin, [])

  if (origin === changed) ***REMOVED***
    return value
***REMOVED***

  let join = value.match(/,\s*/)
  join = join ? join[0] : ', '
  return changed.join(join)
***REMOVED***

/**
 * Split the selector into parts.
 * It returns 3 level deep array because selectors can be comma
 * separated (1), space separated (2), and combined (3)
 * @param ***REMOVED***String***REMOVED*** selector selector string
 * @return ***REMOVED***Array<Array<Array>>***REMOVED*** 3 level deep array of split selector
 * @see utils.test.js for examples
 */
module.exports.splitSelector = function (selector) ***REMOVED***
  return list.comma(selector).map(i => ***REMOVED***
    return list.space(i).map(k => ***REMOVED***
      return k.split(/(?=\.|#)/g)
***REMOVED***)
***REMOVED***)
***REMOVED***

/**
 * Return true if a given value only contains numbers.
 * @param ***REMOVED*******REMOVED*** value
 * @returns ***REMOVED***boolean***REMOVED***
 */
module.exports.isPureNumber = function (value) ***REMOVED***
  if (typeof value === 'number') ***REMOVED***
    return true
***REMOVED***
  if (typeof value === 'string') ***REMOVED***
    return /^[0-9]+$/.test(value)
***REMOVED***
  return false
***REMOVED***
